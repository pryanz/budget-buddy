{% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="content">
        {% for transaction in transactions %}
        <article class="media content-section">
            <div class="media-body">
                <div class="article-metadata">
                    <small class="text-muted">{{ transaction.date_time.strftime('%Y-%m-%d %H:%M:%S') }}</small>
                </div>
                <h2 class="{% if transaction.amount > 0 %}
                                transaction-income
                            {% else %}
                                transaction-expense
                            {% endif %}"
                >
                {{ "%.2f"|format(transaction.amount/100) }}
                </h2>
                <p class="article-content">{{ transaction.category }}</p>
            </div>
        </article>
        {% endfor %}
    </div>
    <div class="form-panel" style="position: sticky; top: 20px;">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">New Transaction (in cents)</legend>
                <div class="form-group">
                    {{ form.category.label(class="form-control-label") }}
                    {% if form.category.errors %}
                    {{ form.category(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.category.errors %}
                        <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% else %}
                    {{ form.category(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{ form.amount.label(class="form-control-label") }}
                    {% if form.amount.errors %}
                    {{ form.amount(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.amount.errors %}
                        <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% else %}
                    {{ form.amount(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-check">
                    {{ form.income(class="form-check-input") }}
                    {{ form.income.label(class="form-check-label") }}
                </div>
            </fieldset>
            <div class="form-group mt-4">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
        </form>
        </br>
        </br>
        <div>
            <article class="media content-section">
                <div class="media-body">
                    <h2 class="article-title">Balance Remaining : ${{ "%.2f"|format(current_user.balance / 100) }}</h2>
                </div>
            </article>
        </div>
    </div>
</div>
{% endblock content %}